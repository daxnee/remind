<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="forms">
        <div class="input-box">
            <input id="email" type="text">
        </div>
        <div class="input-box">
            <input id="name" type="text">
        </div>

        <div class="input-box">
           <input id="phone" type="text">
        </div>

        <div class="input-box">
          <input id="addr" type="text">
        </div>

        <div class="input-box">
            <input id="age" type="text">
        </div>
           <button id="button">클릭</button>
    </div>
</body>
<script
    src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
    crossorigin="anonymous"></script>
 <script>
     
    //  var formschildren = $('.forms').children();
    //  console.log(formschildren)
  
     
     var inputBoxChildren = $('.input-box').children()
    //  console.log(inputBoxChildren) 
     
        var count = 0;
    
     $('#button').on('click',function(){
        if(count >= 3){
        alert('3번 이상 잘못 입력했습니다. 내일 다시 시도해주세요 ')
        return false;
        }

        var jsonData = {};
        

        for(var i=0;  i< inputBoxChildren.length; i++){
            var elementId = inputBoxChildren[i].id;
            var elementValue = $('#' + elementId).val().trim();
           if(elementValue === ''){
               alert('빈칸을 확인해주세요!')
               $('#' + elementId).focus();
               count++;
               return false;
            }
            if(elementId === 'email'  && !docheckEmail(elementValue)){
                console.log('이메일 형식이 아닙니다!')
                $('#' + elementId).focus();
                count++;
                return false;
            }
            jsonData[elementId]= elementValue;
            
        } // end for문 jsonData[elementId] = elementValue
        
        doSubmit(jsonData);
        console.log(jsonData);
    });

    function docheckEmail(email){
          var regonlyEmail = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;
          var isEmail = regonlyEmail.test(email);
         return isEmail; // return type : boolean
       };


    function doSubmit(jsonData){
        
    }

    




    
 </script>
</html>