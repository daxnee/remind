## 220223

- ### 역정규화
```
역정규화 : 테이블에 null이 많으면? => 정규화 대상
- 테이블을 나눴는데(정규화) 해당 데이터가 많지 않다.
- INSERT 횟수가 적다. (데이터가 자주 바뀌지 않는다)

   => 그러면 테이블을 나눈 의미가 없고 오히려 손실임
   정규화한 테이블을 다시 역으로 합치는 것이 '역정규화'!

```
- ### 데이터 정규화 단계
```
1) 테이블 설계 
    
2) 정규화

3) 역정규화(선택사항) 

4) 분산저장 (선택사항)
  : A라는 DB의 데이터가 너무 많을때 
    B라는 DB와 데이터를 나눠서 저장하고 
    주기적으로 서로 동기화를 한다
        
  *이 둘의 관계도 부모 자식 관계가 형성됨
    부모 : master
    자식 : slave

    A : SELECT만 가능하게 설정(자식)
    B : INSERT, DELETE, UPDATE / CREATE를 가능하게 설정(부모)

    의문점) 둘 다 나눠도 동기화하면 데이터양은 같지 않나?
      =>  B의 명령문(DML, CREATE)들은 SELECT에 비해 속도가 느리다.
          서로 속도가 다르니 역할 분담이 효율적임!

   ∴ 4번의 큰 개념을 replication 이라고 한다.

     


```

- ### 모델링 실습 관계 파악하기
```
문제에서 주어는 테이블을 뜻한다. ex) '회원'은 여러 영화관에~ =>  회원 테이블 생성 

<영화관 테이블로 모델링 연습하기>

요구사항1) (One to Many)
: 회원은 여러 영화관에 회원가입할 수 없다.
    
 문제 풀이 방법
 => 영화관과 회원 관계를 파악 (One to Many)

영화관 테이블에 회원번호가 있으면 다른 회원은 해당 영화관에 가입할 수 없다.

회원 테이블에 영화관번호가 PK면 다른 회원도 역시 해당 영화관에 가입할 수 없다

회원 테이블에 영화관 번호가 FK 되어 있어야 한다

디바이스는 차량당 1대

요구사항2) (Many to Many)
: 영화관은 여러 회원을 모집하고 있다.
  회원은 여러 영화관에 회원가입할 수 있다.
  다대다 관계 n:m (무조건 테이블 하나가 더 와야한다)
     
문제 풀이 방법
=> 회원과 영화관은 서로 여러 데이터를 선택할 수 있음. 
 N:M 관계이기 때문에 새로운 테이블을 만들어야 함.
 (회원번호와 영화관 번호를 중복 가능하게 만들어야 한다)
    
    

요구사항3)  (One to One)
: 영화관에 매점을 오픈하려고 함. 
  하지만 매점은 오직 하나의 영화관에만 소속될 수 있다. 
  영화관도 매점 한개만 오픈할 수 있음
    
문제 풀이 방법
=> 문제풀이 :
(서론)
영화관에 매점 1개만 입점할 수 있고 매점은
다른 영화관에 입점할 수 없다.
(본론)
1. ***매점은 영화관 한 곳만 선택 가능.
2. ***영화관은 매점 1개만 입점 가능.
3. 서로 하나씩만 선택할 수 있음.
4. One to One 관계를 가지게 됨.
(결론)
One to One 관계이기 때문에 참조되는 키에 UNIQUE KEY를 부여해서 중복방지를 해야 함.


요구사항4) (One to Many)
: 매점이 오픈되었다.
직원을 채용해야 합니다.
매점은 여러 직원을 채용할 수 있고
직원은 이중 취업이 불가능합니다. (1:n)
    
    
문제 풀이 방법
=> (서론)
매점은 직원들을 채용해야 하고 직원은 다른 매점에
취업할 수 없다.
(본론)
1. ***매점은 여러 직원 채용.
2. ***직원은 매점 한 곳만 일할 수 있음.
3. 매점엔 여러 직원이 있음.
4. One to Many 관계를 가지게 됨.
(결론)
One to Many 관계이고 직원은 여러 매점에 일할 수 없으므로, 직원 테이블에 매점 번호가 참조키(FK)가 된다.


요구사항5)
매점의 직원은 이중취업이 가능하다
오전엔 A매점 오후파트는 B매점
매점은 여러 직원을 채용할 수 있다.
문제 풀이 방법
 => (n:m)
 취업 근황 테이블을 생성해서 
 매점과 직원 테이블이 서로 중복 가능하게 설정해주면 된다.
```

> 회원 관련 테이블 생성시 주의점
    ★ 회원관리 테이블을 만들 땐 무조건 날짜관련(가입, 탈퇴) 컬럼을 넣는다!
    *날짜, 탈퇴 여부 두개는 무조건 와야한다.

- ### 모델링 실습 파일 PDF 저장 방법
```
Tools - report template builder - report builder - 확인 
-> new - p 클릭 - pdf - Export As - pdf로 바꼈는지 확인 
p 다시 클릭-  Export 에서 경로를 바탕화면으로 변경 - 왼쪽에서 Picture 더블 클릭 
 -> 'Picture' Section 클릭 - 상단의 화살표 ↓ 클릭 - 이미지 저장 완료

```
- ### 테이블 컬럼 수와 FK 개수의 중요성
```
FK와 컬럼 수가 많아진다 => 중요한 테이블이라는 뜻 
    
다른 테이블에서 데이터를 참조할시, 
부모와 자식 테이블 속 컬럼 이름은 서로 달라도 무방하다. 
데이터타입만 같으면 됨 ex) Int - Int, String - String
